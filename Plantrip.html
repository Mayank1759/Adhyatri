<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Your Trip | Adhyatri</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="Plantrip.css">
    <link rel="stylesheet" href="Homepage.css">
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="index.html" class="logo">
                    <i class="fas fa-map-marked-alt"></i>
                    Adhyatri
                </a>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <!-- <li><a href="recommendation.html">Recommendations</a></li> -->
                    <li><a href="Reviewpage.html">Review</a></li>
                    <li><a href="Plantrip.html">Travel Plan</a></li>
                    <li><a href="Comparision.html">Compare</a></li>
                    <li><a href="aboutus.html">About</a></li>
                    
                </ul>
                <div class="user-actions">
                    <!-- Will be populated by navbar.js -->
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="trip-planner">
            <h1>Plan Your Perfect Trip</h1>
            
            <div class="planner-container">
                <!-- Destination Selection -->
                <div class="planner-section">
                    <h2><i class="fas fa-map-marker-alt"></i> Destination</h2>
                    <div class="destination-selector">
                        <select id="destination-select">
                            <option value="">Select a destination</option>
                        </select>
                        <div id="destination-info" class="hidden">
                            <img id="destination-image" src="" alt="Destination image">
                            <div class="destination-details">
                                <h3 id="destination-name"></h3>
                                <p id="destination-description"></p>
                                <div class="destination-meta">
                                    <span class="price"><i class="fas fa-tag"></i> $<span id="destination-price"></span>/day</span>
                                    <span class="rating"><i class="fas fa-star"></i> <span id="destination-rating"></span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                

                <!-- Date Selection -->
                <div class="planner-section">
                    <h2><i class="far fa-calendar-alt"></i> Travel Dates</h2>
                    <div class="date-selector">
                        <div class="date-input">
                            <label for="start-date">Start Date:</label>
                            <input type="date" id="start-date">
                        </div>
                        <div class="date-input">
                            <label for="end-date">End Date:</label>
                            <input type="date" id="end-date">
                        </div>
                        <div id="date-error" class="error-message hidden">End date must be after start date</div>
                    </div>
                    <div id="calendar-preview" class="hidden">
                        <h3>Your Trip Duration: <span id="trip-duration">0</span> days</h3>
                    </div>
                </div>

                <!-- Daily Itinerary -->
                <div class="planner-section">
                    <h2><i class="fas fa-calendar-day"></i> Daily Itinerary</h2>
                    <div id="itinerary-container" class="hidden">
                        <div class="itinerary-nav">
                            <button id="prev-day" class="btn"><i class="fas fa-chevron-left"></i></button>
                            <h3>Day <span id="current-day">1</span></h3>
                            <button id="next-day" class="btn"><i class="fas fa-chevron-right"></i></button>
                        </div>
                        <div id="time-slots">
                            <!-- Time slots will be generated by JavaScript -->
                        </div>
                        <button id="add-activity" class="btn"><i class="fas fa-plus"></i> Add Activity</button>
                    </div>
                </div>

                <!-- Map View -->
                <div class="planner-section">
                    <h2><i class="fas fa-map"></i> Map View</h2>
                    <div id="map-container">
                        <div id="map"></div>
                        <div id="map-legend">
                            <h4>Legend:</h4>
                            <ul>
                                <li><i class="fas fa-bed" style="color: #4285f4;"></i> Accommodation</li>
                                <li><i class="fas fa-utensils" style="color: #ea4335;"></i> Restaurants</li>
                                <li><i class="fas fa-camera" style="color: #34a853;"></i> Attractions</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Budget Estimation -->
                <div class="planner-section">
                    <h2><i class="fas fa-calculator"></i> Budget Estimation</h2>
                    <div id="budget-estimation">
                        <div class="budget-category">
                            <h3>Accommodation</h3>
                            <div class="budget-input">
                                <span>$</span>
                                <input type="number" id="accommodation-cost" min="0" value="0">
                                <span>per night × <span id="accommodation-nights">0</span> nights = $<span id="accommodation-total">0</span></span>
                            </div>
                        </div>
                        <div class="budget-category">
                            <h3>Food & Dining</h3>
                            <div class="budget-input">
                                <span>$</span>
                                <input type="number" id="food-cost" min="0" value="0">
                                <span>per day × <span id="food-days">0</span> days = $<span id="food-total">0</span></span>
                            </div>
                        </div>
                        <div class="budget-category">
                            <h3>Activities</h3>
                            <div class="budget-input">
                                <span>$</span>
                                <input type="number" id="activities-cost" min="0" value="0">
                                <span>per day × <span id="activities-days">0</span> days = $<span id="activities-total">0</span></span>
                            </div>
                        </div>
                        <div class="budget-category">
                            <h3>Transportation</h3>
                            <div class="budget-input">
                                <span>$</span>
                                <input type="number" id="transportation-cost" min="0" value="0">
                                <span>total</span>
                            </div>
                        </div>
                        <div class="budget-total">
                            <h3>Estimated Total Cost: $<span id="total-cost">0</span></h3>
                        </div>
                    </div>
                </div>

                <!-- Save Trip -->
                <div class="planner-actions">
                    <button id="save-trip" class="btn btn-secondary"><i class="fas fa-save"></i> Save Trip Plan</button>
                    <button id="share-trip" class="btn"><i class="fas fa-share-alt"></i> Share Trip</button>
                </div>
            </div>
        </section>
    </main>

    <!-- Activity Modal -->
    <div id="activity-modal" class="modal hidden">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Add Activity</h2>
            <form id="activity-form">
                <div class="form-group">
                    <label for="activity-name">Activity Name:</label>
                    <input type="text" id="activity-name" required>
                </div>
                <div class="form-group">
                    <label for="activity-type">Activity Type:</label>
                    <select id="activity-type" required>
                        <option value="attraction">Attraction</option>
                        <option value="restaurant">Restaurant</option>
                        <option value="transport">Transport</option>
                        <option value="accommodation">Accommodation</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="activity-time">Time:</label>
                    <input type="time" id="activity-time" required>
                </div>
                <div class="form-group">
                    <label for="activity-duration">Duration (hours):</label>
                    <input type="number" id="activity-duration" min="1" max="24" value="1">
                </div>
                <div class="form-group">
                    <label for="activity-cost">Estimated Cost ($):</label>
                    <input type="number" id="activity-cost" min="0" value="0">
                </div>
                <div class="form-group">
                    <label for="activity-notes">Notes:</label>
                    <textarea id="activity-notes" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="activity-location">Location (optional):</label>
                    <input type="text" id="activity-location" placeholder="Enter address or place name">
                </div>
                <button type="submit" class="btn">Add Activity</button>
            </form>
        </div>
    </div>

    <!-- Add this near your action buttons -->
<div class="trip-history-section">
    <h3>Your Saved Trips</h3>
    <button id="load-trips-btn">Load Saved Trips</button>
    <div id="trip-history-container" class="hidden">
      <select id="saved-trips-select">
        <option value="">Select a saved trip</option>
      </select>
      <button id="load-selected-trip">Load Selected Trip</button>
      <button id="delete-selected-trip">Delete Trip</button>
    </div>
  </div>
  
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Adhyatri</h3>
                    <p>Your personalized destination recommendation platform helping you discover the perfect places to visit based on your unique preferences.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-pinterest"></i></a>
                    </div>
                </div>
                
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="index.html">Home</a></li>
                        <li><a href="Comparision.html">Destinations</a></li>
                        <li><a href="#">Recommendations</a></li>
                        <li><a href="Reviewpage.html">Review</a></li>
                        <li><a href="Plantrip.html">Travel Plan</a></li>
                        <li><a href="#">About Us</a></li>
                        
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul class="footer-links">
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h3>Newsletter</h3>
                    <p>Subscribe to get travel inspiration and exclusive deals in your inbox.</p>
                    <div class="newsletter-form">
                        <input type="email" placeholder="Your email address">
                        <button class="btn">Subscribe</button>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2023 Adhyatri. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script type="module">
        import { auth } from './JS/firebase.js';
        import { initAuthGuard } from './JS/auth.js';
        import { initializeNavbar } from './JS/navbar.js';
        
        // Initialize auth guard for protected pages
        document.addEventListener('DOMContentLoaded', () => {
            
            initAuthGuard();
            console.log("initAuthGuard()")
            
            initializeNavbar();
            console.log("initializeNavbar()")
        });
    </script>

    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script type="module" src="Plantrip.js"></script>
    <script type="module">
        import { auth } from './JS/firebase.js';
        import { initAuthGuard } from './JS/auth.js';
        import { initializeNavbar } from './JS/navbar.js';
        
        // Initialize auth guard for protected pages
        document.addEventListener('DOMContentLoaded', () => {
            initAuthGuard();
            console.log("initAuthGuard()")
            initializeNavbar();
            console.log("initializeNavbar()")
        });
    </script> 
</body>
</html>